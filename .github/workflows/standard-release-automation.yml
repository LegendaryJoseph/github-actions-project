name: Standard Release Logic - TEST MODE (GitHub Pages Prep)

on:
  workflow_call:
    inputs:
      release_tag: { required: true, type: string }
      release_notes: { required: true, type: string }
      repository_name: { required: true, type: string }

jobs:
  prepare_documentation:
    runs-on: ubuntu-latest
    steps:
      - name: 1. Create Documentation Artifact Folder
        # Creates a temporary folder to simulate the documentation files
        run: mkdir -p docs

      - name: 2. Generate Release Notes File (MD)
        run: |
          # Writes the passed notes into a Markdown file
          DOC_FILE="docs/${{ inputs.release_tag }}.md"
          echo "# Release Documentation for ${{ inputs.repository_name }}" > $DOC_FILE
          echo "## Version: ${{ inputs.release_tag }}" >> $DOC_FILE
          echo "" >> $DOC_FILE
          echo "${{ inputs.release_notes }}" >> $DOC_FILE
          echo "Successfully created documentation file: $DOC_FILE"
          
      # --- GitHub's built-in publishing mechanism (simulates Confluence publish) ---
      - name: 3. Upload Documentation Artifact
        uses: actions/upload-artifact@v4
        with:
          name: ${{ inputs.repository_name }}-release-notes-${{ inputs.release_tag }}
          path: docs/
          # Retention period for testing purposes
          retention-days: 1 
          
      - name: 4. Final Verification
        run: echo "SUCCESS: Documentation for ${{ inputs.release_tag }} is available as an artifact."
